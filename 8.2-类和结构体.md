# 8.2-类和结构体

Swift语言只需在单一的文件中定义一个结构体或者类，系统将会自动生成面向其它代码的外部接口

Swift 中的实例 就是其他编程语言的对象

Swift 中没有指针的概念

常见关键词

- ` static` 
  - 属性和方法默认都是实例的
  - 静态属性不需要实例,它属于类型本身 要先赋值
  - 直接与类型本身关联 无论创建了多少个该类型的实例，这些属性都只有唯一一份
- `private`
  - 限制了权限 只能在当前类和结构体中访问
  - 加了私有以后,要手动写初始化器或者有默认值
- `mutating`
  - 在实例方法中修改值类型
  - 默认情况下，值类型的属性不能在它的实例方法中被修改
  - 即可从方法修改属性, 即修改实例本身,自己修改自己
  - `init`默认就是`mutating`的
  - 可变方法能够赋给隐含属性 `self` 一个全新的实例
- 在下标前面加` class/struct` 可以对类型进行操作

## 1.定义和实例化

### 定义

关键字`struct`声明结构体

关键字`class`声明类

```swift
struct 结构体名字 {
   var 属性名 = 默认值
   var 属性名: 属性类型
 }

 class 类名字 {
   var 属性名 = 默认值
   var 属性名: 属性类型
 }
```

### 实例化

声明的类和结构体仅仅是数据模型,因此需要创建实例 即实例化

构造器语法的最简单形式是在结构体或者类的类型名称后跟随一对空括号

通过这种方式所创建的类或者结构体实例，其属性均会被初始化为默认值

根据 人类的结构模型 实例化出老王和豆豆

```swift
import Foundation

class  动物 {
    var 品种 = "🐱"
    var 毛色 = "橘"
}
struct 人类 {
    let 胳膊的数量 = 2
    let 眼睛的数量 = 2
    var 身高 = 170
    var 宠物 = 动物()
}

var 老王 = 人类()
var 豆豆 = 动物()
```

### 操作属性

通过使用点语法`.`访问或更改实例的属性以及子属性

```swift
print(老王.胳膊的数量)
print(老王.宠物.品种)
老王.身高 = 180
老王.宠物.品种 = "🐶"
print(老王.身高)
print(老王.宠物.品种)
```

## 2.对比

### 共同点

都是对一个资料/模型的抽象数据结构

都可以定义属性用于存储

都可以定义方法用于提供功能

都可以定义下标用于访问值

都可以定义构造器用于初始值

都可以遵循协议,以提供标准功能

都可以通过扩展以增加默认实现之外的功能

### 类特有

引用类型

可继承

被声明为常量,内部的变量属性依然可以更改

只要有属性,就必须写明初始化器

类型转换允许在运行时检查和解释一个类实例的类型

析构器允许一个类实例释放任何其所被分配的资源

引用计数允许对一个类的多次引用

类和 actors 共享很多特性。更多信息请参见 [并发]()。

恒等运算符

​	使用恒等运算符`===`和`!==`判断是否引用同一个实例

​	因为类是引用类型，所以多个常量和变量可能在幕后同时引用同一个类实例。

### 结构体特有

结构体是 Swift 语言的核心组成部分， [Int](https://developer.apple.com/documentation/swift/int)、 [Double](https://developer.apple.com/documentation/swift/double)、[Array](https://developer.apple.com/documentation/swift/array)、[Dictionary](https://developer.apple.com/documentation/swift/dictionary)等数据类型核心都是用结构体实现的

值类型

被声明为常量时,内部的属性也无法更改

拥有静态空间和实例空间

自带默认的初始化器(成员逐一构造器)

---

以上