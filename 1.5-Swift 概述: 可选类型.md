可选类型是独立的数据类型

用于处理值缺失的情况

可选类型表示两种可能, 有值可以解析访问这个值, 或者根本没有值

使用`数据类型?`表示

底层是用枚举实现的

```swift
var 女朋友 = String?
var 女朋友: Optional<String>
```

当尝试把`String` 值转换成一个 `Int` 值时

因为不确定是否能够转换,所以`b`的类型就变成了`Optional<Int>`

```swift
let a = "123"
let b = Int(a)

print(type(of: b))
```

# nil

用于表示没有值的情况

可以直接当做字面量赋值

不能用于非可选的常量和变量

如果需要处理值缺失的情况，把它们声明成对应的可选类型

如果声明一个可选变量但是没有赋值，它们会自动被设置为 `nil`

```swift
var a = nil
var b: String?
```

# 判断

### 使用条件语句判断

使用if语句和相等`==`不相等`≠`判断一个可选值是否是nil

```swift
var 不知道有没有值的字符串: String?
不知道有没有值的字符串 = nil

if 不知道有没有值的字符串 == nil {
  print("没有值,是nil")
}
```

## 使用空合运算符判断

空合运算符是专用于判断可选类型的运算符

用`a ?? b`表示

对可选类型 `a` 进行空判断

如果 `a` 包含一个值就进行解包，否则就返回一个默认值 `b`

表达式 `a` 必须是可选类型

默认值 `b` 的类型必须要和 `a` 存储值的类型保持一致

```swift
var 不知道有没有值的字符串: String?
不知道有没有值的字符串 = "Hello Swift"

var c = 不知道有没有值的字符串 ?? "是空的"
print(c)
```

空合运算符是对以下代码的简短表达方法：

```swift
a != nil ? a! : b
```

如果 a 为非空值, 那么值 b 将不会被计算, 这也就是所谓的短路求值

# 解包

## 强制解析

使用`可选数据类型!`表示强制解析

必须在在明确知道该可选类型有值时才可以使用

```swift
var 不知道有没有值的字符串: String?
不知道有没有值的字符串 = "Hello Swift"

if 不知道有没有值的字符串 != nil {
    print("有值,值是\(不知道有没有值的字符串!)")
}
```

## 隐式解析

隐式解析可选类型主要被用在 Swift 中类的构造过程中

当明确知道可选类型被第一次赋值之后必定会有值的情况下,就不用判断直接解析值

直接把可选的类型的后面的问号`数据类型?`改成感叹号`数据类型!`来声明一个隐式解析可选类型

一个隐式解析可选类型其实就是一个普通的可选类型，但是可以被当做非可选类型来使用, 不需要每次都使用解析来获取可选值

如果一个变量之后可能变成 `nil` 的话就不要使用隐式解析可选类型

如果需要在变量的生命周期中判断是否是 `nil` 的话，请使用普通可选类型

```swift
var 不知道有没有值的字符串: String? = "4"
let a: String = 不知道有没有值的字符串!
//强制解析可选类型的值

var 不知道有没有值的字符串2: String! = "4"
let b:String = 不知道有没有值的字符串2
//隐式解析可选类型
```

# 可选项绑定

可选绑定就是把判断和解析捆绑执行的操作

先判断是否有值,如果有值就把值赋给一个临时的常量或变量

可选绑定可以用在 `if`和 `while`语句中

在 `if` 条件语句中使用常量和变量来创建一个可选绑定，仅在 `if` 语句的句中（`body`）中才能获取到值

```swift
var 不知道有没有值的字符串: String? = "4"

if let b = 不知道有没有值的字符串 {
  print("有值,值是" + b)
} else {
  print("没值,是nil")
}
```

这段代码的含义是:

如果可选类型有值,把这个值赋值给新常量 这个字符串的值是 并打印提示

如果没有值,直接打印提示

简写:

```swift
var 不知道有没有值的字符串: String? = "4"

if let 不知道有没有值的字符串 {
  print("有值,值是" + 不知道有没有值的字符串)
}
```

# 可选链

用`变量?`表示

意思是问号前面的变量如果为` nil `则停止执行整个表达式 返回` nil`

用于避免程序崩溃

---

以上